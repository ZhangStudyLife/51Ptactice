<<<<<<< HEAD
C51 COMPILER V9.60.7.0   MATRIXKEY                                                         09/12/2024 20:48:54 PAGE 1   
=======
C51 COMPILER V9.60.7.0   MATRIXKEY                                                         09/12/2024 12:13:49 PAGE 1   
>>>>>>> 6d397c2d69e7cb89d6aa19427358483d0ade3950


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MATRIXKEY
OBJECT MODULE PLACED IN .\Objects\MatrixKey.obj
COMPILER INVOKED BY: D:\KEILC51\C51\BIN\C51.EXE MatrixKey.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings
                    -\MatrixKey.lst) OBJECT(.\Objects\MatrixKey.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          unsigned char MatrixKey()
   4          {
   5   1          unsigned char keyNum=0;
   6   1      
   7   1          //获取矩阵键盘的输出
   8   1          P1=0xFF;
   9   1          P1_7=0;
  10   1          if (P1_3==0) {Delay(20);while (P1_3==0);Delay(20);keyNum=1;return keyNum;};
  11   1          if (P1_2==0) {Delay(20);while (P1_2==0);Delay(20);keyNum=2;return keyNum;};
  12   1          if (P1_1==0) {Delay(20);while (P1_1==0);Delay(20);keyNum=3;return keyNum;};
  13   1          if (P1_0==0) {Delay(20);while (P1_0==0);Delay(20);keyNum=4;return keyNum;};
<<<<<<< HEAD
  14   1          P1=0xFF;
  15   1          P1_6=0;
  16   1          if (P1_3==0) {Delay(20);while (P1_3==0);Delay(20);keyNum=5;return keyNum;};
  17   1          if (P1_2==0) {Delay(20);while (P1_2==0);Delay(20);keyNum=6;return keyNum;};
  18   1          if (P1_1==0) {Delay(20);while (P1_1==0);Delay(20);keyNum=7;return keyNum;};
  19   1          if (P1_0==0) {Delay(20);while (P1_0==0);Delay(20);keyNum=8;return keyNum;};
  20   1          P1=0xFF;
  21   1          P1_5=0;
  22   1          if (P1_3==0) {Delay(20);while (P1_3==0);Delay(20);keyNum=9;return keyNum;};
  23   1          if (P1_2==0) {Delay(20);while (P1_2==0);Delay(20);keyNum=10;return keyNum;};
  24   1          if (P1_1==0) {Delay(20);while (P1_1==0);Delay(20);keyNum=11;return keyNum;};
  25   1          if (P1_0==0) {Delay(20);while (P1_0==0);Delay(20);keyNum=12;return keyNum;};
  26   1          P1=0xFF;
  27   1          P1_4=0;
  28   1          if (P1_3==0) {Delay(20);while (P1_3==0);Delay(20);keyNum=13;return keyNum;};
  29   1          if (P1_2==0) {Delay(20);while (P1_2==0);Delay(20);keyNum=14;return keyNum;};
  30   1          if (P1_1==0) {Delay(20);while (P1_1==0);Delay(20);keyNum=15;return keyNum;};
  31   1          if (P1_0==0) {Delay(20);while (P1_0==0);Delay(20);keyNum=16;return keyNum;};
  32   1      }
  33          
  34          // #include <REGX52.H>
  35          // #include "Delay.h"
  36          
  37          // unsigned char MatrixKey()
  38          // {
  39          //     unsigned char keyNum = 0; // 初始化按键编号为0
  40          //     unsigned char col, row; // 列和行的变量
  41          
  42          //     // 扫描矩阵键盘的列
  43          //     for (col = 0; col < 4; col++)
  44          //     {
  45          //         P1 = 0xFF; // 初始化P1端口
  46          //         P1 &= ~(0x80 >> col); // 逐列拉低
  47          //         Delay(20); // 延时去抖动
  48          
  49          //         // 检测按键
  50          //         if (P1_3 == 0) { Delay(20); while (P1_3 == 0); Delay(20); keyNum = col * 4 + 1; }
  51          //         if (P1_2 == 0) { Delay(20); while (P1_2 == 0); Delay(20); keyNum = col * 4 + 2; }
  52          //         if (P1_1 == 0) { Delay(20); while (P1_1 == 0); Delay(20); keyNum = col * 4 + 3; }
  53          //         if (P1_0 == 0) { Delay(20); while (P1_0 == 0); Delay(20); keyNum = col * 4 + 4; }
  54          
C51 COMPILER V9.60.7.0   MATRIXKEY                                                         09/12/2024 20:48:54 PAGE 2   

  55          //         // 如果检测到按键按下，退出循环
  56          //         if (keyNum != 0) break;
  57          //     }
  58          //     return keyNum; // 返回按键编号
  59          // }
*** WARNING C291 IN LINE 32 OF MatrixKey.c: not every exit path returns a value


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    438    ----
=======
  14   1          P1_6=0;
  15   1          if (P1_3==0) {Delay(20);while (P1_3==0);Delay(20);keyNum=5;return keyNum;};
  16   1          if (P1_2==0) {Delay(20);while (P1_2==0);Delay(20);keyNum=6;return keyNum;};
  17   1          if (P1_1==0) {Delay(20);while (P1_1==0);Delay(20);keyNum=7;return keyNum;};
  18   1          if (P1_0==0) {Delay(20);while (P1_0==0);Delay(20);keyNum=8;return keyNum;};
  19   1          P1_5=0;
  20   1          if (P1_3==0) {Delay(20);while (P1_3==0);Delay(20);keyNum=9;return keyNum;};
  21   1          if (P1_2==0) {Delay(20);while (P1_2==0);Delay(20);keyNum=10;return keyNum;};
  22   1          if (P1_1==0) {Delay(20);while (P1_1==0);Delay(20);keyNum=11;return keyNum;};
  23   1          if (P1_0==0) {Delay(20);while (P1_0==0);Delay(20);keyNum=12;return keyNum;};
  24   1          P1_4=0;
  25   1          if (P1_3==0) {Delay(20);while (P1_3==0);Delay(20);keyNum=13;return keyNum;};
  26   1          if (P1_2==0) {Delay(20);while (P1_2==0);Delay(20);keyNum=14;return keyNum;};
  27   1          if (P1_1==0) {Delay(20);while (P1_1==0);Delay(20);keyNum=15;return keyNum;};
  28   1          if (P1_0==0) {Delay(20);while (P1_0==0);Delay(20);keyNum=16;return keyNum;};
  29   1      }
*** WARNING C291 IN LINE 29 OF MatrixKey.c: not every exit path returns a value


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    429    ----
>>>>>>> 6d397c2d69e7cb89d6aa19427358483d0ade3950
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
